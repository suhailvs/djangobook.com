<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Appendix A: Model Definition Reference</title>
    <link rel="stylesheet" href="_static/reset-min.css" type="text/css">
    <link rel="stylesheet" href="_static/grids-min.css" type="text/css">
    <link rel="stylesheet" href="_static/djangobook.css" type="text/css">
    
  </head>
  <body>
    <div id="doc" class="yui-t7">
      <div id="hd">
        <h1><a href="index.html">The Django Book</a></h1>
        <div id="global-nav">
            <a class="about" href="frontmatter.html">About</a>
        </div>
        
<div class="nav">
    
        <a href='chapter20.html'>&laquo; previous</a> &loz;
    
    <a href="index.html">table of contents</a>
    
        &loz; <a href='appendixB.html'>next &raquo;</a>
    
</div>

      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            
  <div id="chapter-body"><div class="section" id="appendix-a-model-definition-reference">
<h1>Appendix A: Model Definition Reference<a class="headerlink" href="#appendix-a-model-definition-reference" title="Permalink to this headline">¶</a></h1>
<p>Chapter 5 explains the basics of defining models, and we use them throughout
the rest of the book. There is, however, a <em>huge</em> range of model options
available not covered elsewhere. This appendix explains each possible model
definition option.</p>
<p>Note that although these APIs are considered stable, the Django developers
consistently add new shortcuts and conveniences to the model definition. It’s a
good idea to always check the latest documentation online at
<a class="reference external" href="http://docs.djangoproject.com/">http://docs.djangoproject.com/</a>.</p>
<div class="section" id="fields">
<h2>Fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h2>
<p>The most important part of a model – and the only required part of a model –
is the list of database fields it defines.</p>
<div class="admonition-field-name-restrictions admonition">
<p class="first admonition-title">Field Name Restrictions</p>
<p>Django places only two restrictions on model field names:</p>
<ol class="arabic">
<li><p class="first">A field name cannot be a Python reserved word, because that would result
in a Python syntax error. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">pass</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span> <span class="c1"># &#39;pass&#39; is a reserved word!</span>
</pre></div>
</div>
</li>
<li><p class="first">A field name cannot contain more than one underscore in a row, due to
the way Django’s query lookup syntax works. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">foo__bar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span> <span class="c1"># &#39;foo__bar&#39; has two underscores!</span>
</pre></div>
</div>
</li>
</ol>
<p>These limitations can be worked around, though, because your field name
doesn’t necessarily have to match your database column name. See
“db_column”, below.</p>
<p class="last">SQL reserved words, such as <code class="docutils literal"><span class="pre">join</span></code>, <code class="docutils literal"><span class="pre">where</span></code>, or <code class="docutils literal"><span class="pre">select</span></code>, <em>are</em> allowed
as model field names, because Django escapes all database table names and
column names in every underlying SQL query. It uses the quoting syntax of your
particular database engine.</p>
</div>
<p>Each field in your model should be an instance of the appropriate <code class="docutils literal"><span class="pre">Field</span></code>
class. Django uses the field class types to determine a few things:</p>
<ul class="simple">
<li>The database column type (e.g., <code class="docutils literal"><span class="pre">INTEGER</span></code>, <code class="docutils literal"><span class="pre">VARCHAR</span></code>).</li>
<li>The widget to use in Django’s forms and admin site, if you care to use it
(e.g., <code class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;text&quot;&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;select&gt;</span></code>).</li>
<li>The minimal validation requirements, which are used in Django’s admin
interface and by forms.</li>
</ul>
<p>A complete list of field classes follows, sorted alphabetically. Note that
relationship fields (<code class="docutils literal"><span class="pre">ForeignKey</span></code>, etc.) are handled in the next section.</p>
<div class="section" id="autofield">
<h3>AutoField<a class="headerlink" href="#autofield" title="Permalink to this headline">¶</a></h3>
<p>An <code class="docutils literal"><span class="pre">IntegerField</span></code> that automatically increments according to available IDs.
You usually won’t need to use this directly; a primary key field will
automatically be added to your model if you don’t specify otherwise.</p>
</div>
<div class="section" id="booleanfield">
<h3>BooleanField<a class="headerlink" href="#booleanfield" title="Permalink to this headline">¶</a></h3>
<p>A true/false field.</p>
<div class="admonition-mysql-users admonition">
<p class="first admonition-title">MySQL users…</p>
<p class="last">A boolean field in MySQL is stored as a <code class="docutils literal"><span class="pre">TINYINT</span></code> column with a value of
either 0 or 1 (most databases have a proper <code class="docutils literal"><span class="pre">BOOLEAN</span></code> type instead). So,
for MySQL, only, when a <code class="docutils literal"><span class="pre">BooleanField</span></code> is retrieved from the database
and stored on a model attribute, it will have the values 1 or 0, rather
than <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>. Normally, this shouldn’t be a problem, since
Python guarantees that <code class="docutils literal"><span class="pre">1</span> <span class="pre">==</span> <span class="pre">True</span></code> and <code class="docutils literal"><span class="pre">0</span> <span class="pre">==</span> <span class="pre">False</span></code> are both true.
Just be careful if you’re writing something like <code class="docutils literal"><span class="pre">obj</span> <span class="pre">is</span> <span class="pre">True</span></code> when
<code class="docutils literal"><span class="pre">obj</span></code> is a value from a boolean attribute on a model. If that model was
constructed using the <code class="docutils literal"><span class="pre">mysql</span></code> backend, the “<code class="docutils literal"><span class="pre">is</span></code>” test will fail.
Prefer an equality test (using “<code class="docutils literal"><span class="pre">==</span></code>”) in cases like this.</p>
</div>
</div>
<div class="section" id="charfield">
<h3>CharField<a class="headerlink" href="#charfield" title="Permalink to this headline">¶</a></h3>
<p>A string field, for small- to large-sized strings.</p>
<p>For very large amounts of text, use <code class="docutils literal"><span class="pre">TextField</span></code>.</p>
<p><code class="docutils literal"><span class="pre">CharField</span></code> has one extra required argument: <code class="docutils literal"><span class="pre">max_length</span></code>. This is the
maximum length (in characters) of the field. The <code class="docutils literal"><span class="pre">max_length</span></code> is enforced
at the database level and in Django’s validation.</p>
</div>
<div class="section" id="commaseparatedintegerfield">
<h3>CommaSeparatedIntegerField<a class="headerlink" href="#commaseparatedintegerfield" title="Permalink to this headline">¶</a></h3>
<p>A field of integers separated by commas. As in <code class="docutils literal"><span class="pre">CharField</span></code>, the
<code class="docutils literal"><span class="pre">max_length</span></code> argument is required.</p>
</div>
<div class="section" id="datefield">
<h3>DateField<a class="headerlink" href="#datefield" title="Permalink to this headline">¶</a></h3>
<p>A date, represented in Python by a <code class="docutils literal"><span class="pre">datetime.date</span></code> instance.</p>
</div>
<div class="section" id="datetimefield">
<h3>DateTimeField<a class="headerlink" href="#datetimefield" title="Permalink to this headline">¶</a></h3>
<p>A date and time, represented in Python by a <code class="docutils literal"><span class="pre">datetime.datetime</span></code> instance.</p>
</div>
<div class="section" id="decimalfield">
<h3>DecimalField<a class="headerlink" href="#decimalfield" title="Permalink to this headline">¶</a></h3>
<p>A fixed-precision decimal number, represented in Python by a
<code class="docutils literal"><span class="pre">decimal.Decimal</span></code> instance. Has two <strong>required</strong> arguments:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">max_digits</span></code></dt>
<dd>The maximum number of digits allowed in the number</dd>
<dt><code class="docutils literal"><span class="pre">decimal_places</span></code></dt>
<dd>The number of decimal places to store with the number</dd>
</dl>
<p>For example, to store numbers up to 999 with a resolution of 2 decimal places,
you’d use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>And to store numbers up to approximately one billion with a resolution of 10
decimal places:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>When assigning to a <code class="docutils literal"><span class="pre">DecimalField</span></code>, use either a <code class="docutils literal"><span class="pre">decimal.Decimal</span></code> object
or a string – not a Python float.</p>
</div>
<div class="section" id="emailfield">
<h3>EmailField<a class="headerlink" href="#emailfield" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">CharField</span></code> that checks that the value is a valid e-mail address.</p>
</div>
<div class="section" id="filefield">
<h3>FileField<a class="headerlink" href="#filefield" title="Permalink to this headline">¶</a></h3>
<p>A file-upload field.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">primary_key</span></code> and <code class="docutils literal"><span class="pre">unique</span></code> arguments are not supported, and will
raise a <code class="docutils literal"><span class="pre">TypeError</span></code> if used.</p>
</div>
<p>Has one <strong>required</strong> argument:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">upload_to</span></code></dt>
<dd><p class="first">A local filesystem path that will be appended to your <code class="docutils literal"><span class="pre">MEDIA_ROOT</span></code>
setting to determine the value of the <code class="docutils literal"><span class="pre">django.core.files.File.url</span></code>
attribute.</p>
<p>This path may contain “strftime formatting” (see the Python docs for the
<code class="docutils literal"><span class="pre">time</span></code> standard library module), which will be replaced using the
date/time of the file upload (so that uploaded files don’t fill up the given
directory).</p>
<p>This may also be a callable, such as a function, which will be called to
obtain the upload path, including the filename. This callable must be able
to accept two arguments, and return a Unix-style path (with forward slashes)
to be passed along to the storage system. The two arguments that will be
passed are:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">instance</span></code></td>
<td><p class="first">An instance of the model where the
<code class="docutils literal"><span class="pre">FileField</span></code> is defined. More specifically,
this is the particular instance where the
current file is being attached.</p>
<p class="last">In most cases, this object will not have been
saved to the database yet, so if it uses the
default <code class="docutils literal"><span class="pre">AutoField</span></code>, <em>it might not yet have a
value for its primary key field</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">filename</span></code></td>
<td>The filename that was originally given to the
file. This may or may not be taken into account
when determining the final destination path.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Also has one optional argument:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">storage</span></code></dt>
<dd>Optional. A storage object, which handles the storage and retrieval of your
files.</dd>
</dl>
<p>Using a <code class="docutils literal"><span class="pre">FileField</span></code> or an <code class="docutils literal"><span class="pre">ImageField</span></code> (see below) in a model
takes a few steps:</p>
<ol class="arabic simple">
<li>In your settings file, you’ll need to define <code class="docutils literal"><span class="pre">MEDIA_ROOT</span></code> as the
full path to a directory where you’d like Django to store uploaded files.
(For performance, these files are not stored in the database.) Define
<code class="docutils literal"><span class="pre">MEDIA_URL</span></code> as the base public URL of that directory. Make sure
that this directory is writable by the Web server’s user account.</li>
<li>Add the <code class="docutils literal"><span class="pre">FileField</span></code> or <code class="docutils literal"><span class="pre">ImageField</span></code> to your model, making
sure to define the <code class="docutils literal"><span class="pre">upload_to</span></code> option to tell Django
to which subdirectory of <code class="docutils literal"><span class="pre">MEDIA_ROOT</span></code> it should upload files.</li>
<li>All that will be stored in your database is a path to the file
(relative to <code class="docutils literal"><span class="pre">MEDIA_ROOT</span></code>). You’ll most likely want to use the
convenience <code class="docutils literal"><span class="pre">url</span></code> function provided by
Django. For example, if your <code class="docutils literal"><span class="pre">ImageField</span></code> is called <code class="docutils literal"><span class="pre">mug_shot</span></code>,
you can get the absolute URL to your image in a template with
<code class="docutils literal"><span class="pre">{{</span> <span class="pre">object.mug_shot.url</span> <span class="pre">}}</span></code>.</li>
</ol>
<p>For example, say your <code class="docutils literal"><span class="pre">MEDIA_ROOT</span></code> is set to <code class="docutils literal"><span class="pre">'/home/media'</span></code>, and
<code class="docutils literal"><span class="pre">upload_to</span></code> is set to <code class="docutils literal"><span class="pre">'photos/%Y/%m/%d'</span></code>. The <code class="docutils literal"><span class="pre">'%Y/%m/%d'</span></code>
part of <code class="docutils literal"><span class="pre">upload_to</span></code> is strftime formatting; <code class="docutils literal"><span class="pre">'%Y'</span></code> is the
four-digit year, <code class="docutils literal"><span class="pre">'%m'</span></code> is the two-digit month and <code class="docutils literal"><span class="pre">'%d'</span></code> is the two-digit
day. If you upload a file on Jan. 15, 2007, it will be saved in the directory
<code class="docutils literal"><span class="pre">/home/media/photos/2007/01/15</span></code>.</p>
<p>If you want to retrieve the upload file’s on-disk filename, or a URL that refers
to that file, or the file’s size, you can use the
<code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">url</span></code> and <code class="docutils literal"><span class="pre">size</span></code> attributes.</p>
<p>Note that whenever you deal with uploaded files, you should pay close attention
to where you’re uploading them and what type of files they are, to avoid
security holes. <em>Validate all uploaded files</em> so that you’re sure the files are
what you think they are. For example, if you blindly let somebody upload files,
without validation, to a directory that’s within your Web server’s document
root, then somebody could upload a CGI or PHP script and execute that script by
visiting its URL on your site. Don’t allow that.</p>
<p>By default, <code class="docutils literal"><span class="pre">FileField</span></code> instances are
created as <code class="docutils literal"><span class="pre">varchar(100)</span></code> columns in your database. As with other fields, you
can change the maximum length using the <code class="docutils literal"><span class="pre">max_length</span></code> argument.</p>
</div>
<div class="section" id="filepathfield">
<h3>FilePathField<a class="headerlink" href="#filepathfield" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">CharField</span></code> whose choices are limited to the filenames in a certain
directory on the filesystem. Has three special arguments, of which the first is
<strong>required</strong>:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">path</span></code></dt>
<dd>Required. The absolute filesystem path to a directory from which this
<code class="docutils literal"><span class="pre">FilePathField</span></code> should get its choices. Example: <code class="docutils literal"><span class="pre">&quot;/home/images&quot;</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">match</span></code></dt>
<dd>Optional. A regular expression, as a string, that <code class="docutils literal"><span class="pre">FilePathField</span></code>
will use to filter filenames. Note that the regex will be applied to the
base filename, not the full path. Example: <code class="docutils literal"><span class="pre">&quot;foo.*\.txt$&quot;</span></code>, which will
match a file called <code class="docutils literal"><span class="pre">foo23.txt</span></code> but not <code class="docutils literal"><span class="pre">bar.txt</span></code> or <code class="docutils literal"><span class="pre">foo23.gif</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">recursive</span></code></dt>
<dd>Optional. Either <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>. Default is <code class="docutils literal"><span class="pre">False</span></code>. Specifies
whether all subdirectories of <code class="docutils literal"><span class="pre">path</span></code> should be included.</dd>
</dl>
<p>Of course, these arguments can be used together.</p>
<p>The one potential gotcha is that <code class="docutils literal"><span class="pre">match</span></code> applies to the
base filename, not the full path. So, this example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FilePathField</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/home/images&quot;</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;foo.*&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>…will match <code class="docutils literal"><span class="pre">/home/images/bar/foo.gif</span></code> but not <code class="docutils literal"><span class="pre">/home/images/foo/bar.gif</span></code>
because the <code class="docutils literal"><span class="pre">match</span></code> applies to the base filename
(<code class="docutils literal"><span class="pre">foo.gif</span></code> and <code class="docutils literal"><span class="pre">bar.gif</span></code>).</p>
<p>By default, <code class="docutils literal"><span class="pre">FilePathField</span></code> instances are
created as <code class="docutils literal"><span class="pre">varchar(100)</span></code> columns in your database. As with other fields, you
can change the maximum length using the <code class="docutils literal"><span class="pre">max_length</span></code> argument.</p>
</div>
<div class="section" id="floatfield">
<h3>FloatField<a class="headerlink" href="#floatfield" title="Permalink to this headline">¶</a></h3>
<p>A floating-point number represented in Python by a <code class="docutils literal"><span class="pre">float</span></code> instance.</p>
</div>
<div class="section" id="imagefield">
<h3>ImageField<a class="headerlink" href="#imagefield" title="Permalink to this headline">¶</a></h3>
<p>Like <code class="docutils literal"><span class="pre">FileField</span></code>, but validates that the uploaded object is a valid
image. Has two extra optional arguments:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">height_field</span></code></dt>
<dd>Name of a model field which will be auto-populated with the height of the
image each time the model instance is saved.</dd>
<dt><code class="docutils literal"><span class="pre">width_field</span></code></dt>
<dd>Name of a model field which will be auto-populated with the width of the
image each time the model instance is saved.</dd>
</dl>
<p>In addition to the special attributes that are available for FileField``,
an <code class="docutils literal"><span class="pre">ImageField</span></code> also has <code class="docutils literal"><span class="pre">height</span></code> and <code class="docutils literal"><span class="pre">width</span></code> attributes, both of which
correspond to the image’s height and width in pixels.</p>
<p>Requires the Python Imaging Library, available at <a class="reference external" href="http://www.pythonware.com/products/pil/">http://www.pythonware.com/products/pil/</a>.</p>
<p>By default, <code class="docutils literal"><span class="pre">ImageField</span></code> instances are
created as <code class="docutils literal"><span class="pre">varchar(100)</span></code> columns in your database. As with other fields, you
can change the maximum length using the <code class="docutils literal"><span class="pre">max_length</span></code> argument.</p>
</div>
<div class="section" id="integerfield">
<h3>IntegerField<a class="headerlink" href="#integerfield" title="Permalink to this headline">¶</a></h3>
<p>An integer.</p>
</div>
<div class="section" id="ipaddressfield">
<h3>IPAddressField<a class="headerlink" href="#ipaddressfield" title="Permalink to this headline">¶</a></h3>
<p>An IP address, in string format (e.g. <code class="docutils literal"><span class="pre">'192.0.2.30'</span></code>).</p>
</div>
<div class="section" id="nullbooleanfield">
<h3>NullBooleanField<a class="headerlink" href="#nullbooleanfield" title="Permalink to this headline">¶</a></h3>
<p>Like a <code class="docutils literal"><span class="pre">BooleanField</span></code>, but allows <code class="docutils literal"><span class="pre">NULL</span></code> as one of the options. Use
this instead of a <code class="docutils literal"><span class="pre">BooleanField</span></code> with <code class="docutils literal"><span class="pre">null=True</span></code>.</p>
</div>
<div class="section" id="positiveintegerfield">
<h3>PositiveIntegerField<a class="headerlink" href="#positiveintegerfield" title="Permalink to this headline">¶</a></h3>
<p>Like an <code class="docutils literal"><span class="pre">IntegerField</span></code>, but must be positive.</p>
</div>
<div class="section" id="positivesmallintegerfield">
<h3>PositiveSmallIntegerField<a class="headerlink" href="#positivesmallintegerfield" title="Permalink to this headline">¶</a></h3>
<p>Like a <code class="docutils literal"><span class="pre">PositiveIntegerField</span></code>, but only allows values under a certain
(database-dependent) point.</p>
</div>
<div class="section" id="slugfield">
<h3>SlugField<a class="headerlink" href="#slugfield" title="Permalink to this headline">¶</a></h3>
<p>“Slug” is a newspaper term. A slug is a short label for something,
containing only letters, numbers, underscores or hyphens. They’re generally used
in URLs.</p>
<p>Like a <code class="docutils literal"><span class="pre">CharField</span></code>, you can specify <code class="docutils literal"><span class="pre">max_length</span></code>. If <code class="docutils literal"><span class="pre">max_length</span></code> is not
specified, Django will use a default length of 50.</p>
<p>Implies setting <code class="docutils literal"><span class="pre">db_index</span></code> to <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<div class="section" id="smallintegerfield">
<h3>SmallIntegerField<a class="headerlink" href="#smallintegerfield" title="Permalink to this headline">¶</a></h3>
<p>Like an <code class="docutils literal"><span class="pre">IntegerField</span></code>, but only allows values under a certain
(database-dependent) point.</p>
</div>
<div class="section" id="textfield">
<h3>TextField<a class="headerlink" href="#textfield" title="Permalink to this headline">¶</a></h3>
<p>A large text field.</p>
<p>Also see <code class="docutils literal"><span class="pre">CharField</span></code> for storing smaller bits of text.</p>
</div>
<div class="section" id="timefield">
<h3>TimeField<a class="headerlink" href="#timefield" title="Permalink to this headline">¶</a></h3>
<p>A time, represented in Python by a <code class="docutils literal"><span class="pre">datetime.time</span></code> instance. Accepts the same
auto-population options as <code class="docutils literal"><span class="pre">DateField</span></code>.</p>
</div>
<div class="section" id="urlfield">
<h3>URLField<a class="headerlink" href="#urlfield" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">CharField</span></code> for a URL. Has one extra optional argument:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">verify_exists</span></code></dt>
<dd>If <code class="docutils literal"><span class="pre">True</span></code> (the default), the URL given will be checked for existence
(i.e., the URL actually loads and doesn’t give a 404 response). It should
be noted that when using the single-threaded development server, validating
a url being served by the same server will hang.
This should not be a problem for multithreaded servers.</dd>
</dl>
<p>Like all <code class="docutils literal"><span class="pre">CharField</span></code> subclasses, <code class="docutils literal"><span class="pre">URLField</span></code> takes the optional
<code class="docutils literal"><span class="pre">max_length</span></code> argument. If you don’t specify
<code class="docutils literal"><span class="pre">max_length</span></code>, a default of 200 is used.</p>
</div>
<div class="section" id="xmlfield">
<h3>XMLField<a class="headerlink" href="#xmlfield" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">TextField</span></code> that checks that the value is valid XML that matches a
given schema. Takes one required argument:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">schema_path</span></code></dt>
<dd>The filesystem path to a RelaxNG schema against which to validate the
field. For more on RelaxNG, see <a class="reference external" href="http://www.relaxng.org/">http://www.relaxng.org/</a>.</dd>
</dl>
</div>
</div>
<div class="section" id="universal-field-options">
<h2>Universal Field Options<a class="headerlink" href="#universal-field-options" title="Permalink to this headline">¶</a></h2>
<p>The following arguments are available to all field types. All are optional.</p>
<div class="section" id="null">
<h3>null<a class="headerlink" href="#null" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, Django will store empty values as <code class="docutils literal"><span class="pre">NULL</span></code> in the database. If
<code class="docutils literal"><span class="pre">False</span></code>, saving empty values will likely result in a database error. Default
is <code class="docutils literal"><span class="pre">False</span></code>.</p>
<p>Note that empty string values will always get stored as empty strings, not as
<code class="docutils literal"><span class="pre">NULL</span></code>. Only use <code class="docutils literal"><span class="pre">null=True</span></code> for non-string fields such as integers,
booleans and dates. For both types of fields, you will also need to set
<code class="docutils literal"><span class="pre">blank=True</span></code> if you wish to permit empty values in forms, as the
<code class="docutils literal"><span class="pre">null</span></code> parameter only affects database storage (see
<code class="docutils literal"><span class="pre">blank</span></code>).</p>
<p>Avoid using <code class="docutils literal"><span class="pre">null</span></code> on string-based fields such as
<code class="docutils literal"><span class="pre">CharField</span></code> and <code class="docutils literal"><span class="pre">TextField</span></code> unless you have an excellent reason.
If a string-based field has <code class="docutils literal"><span class="pre">null=True</span></code>, that means it has two possible values
for “no data”: <code class="docutils literal"><span class="pre">NULL</span></code>, and the empty string. In most cases, it’s redundant to
have two possible values for “no data;” Django’s convention is to use the empty
string, not <code class="docutils literal"><span class="pre">NULL</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When using the Oracle database backend, the <code class="docutils literal"><span class="pre">null=True</span></code> option will be
coerced for string-based fields that have the empty string as a possible
value, and the value <code class="docutils literal"><span class="pre">NULL</span></code> will be stored to denote the empty string.</p>
</div>
<p>For more on this, see the section “Making Date and Numeric Fields Optional” in
Chapter 6.</p>
</div>
<div class="section" id="blank">
<h3>blank<a class="headerlink" href="#blank" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, the field is allowed to be blank. Default is <code class="docutils literal"><span class="pre">False</span></code>.</p>
<p>Note that this is different than <code class="docutils literal"><span class="pre">null</span></code>. <code class="docutils literal"><span class="pre">null</span></code> is
purely database-related, whereas <code class="docutils literal"><span class="pre">blank</span></code> is validation-related. If
a field has <code class="docutils literal"><span class="pre">blank=True</span></code>, validation on Django’s admin site will allow entry
of an empty value. If a field has <code class="docutils literal"><span class="pre">blank=False</span></code>, the field will be required.</p>
</div>
<div class="section" id="choices">
<h3>choices<a class="headerlink" href="#choices" title="Permalink to this headline">¶</a></h3>
<p>An iterable (e.g., a list or tuple) of 2-tuples to use as choices for this
field.</p>
<p>A choices list looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="s1">&#39;Freshman&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;SO&#39;</span><span class="p">,</span> <span class="s1">&#39;Sophomore&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;JR&#39;</span><span class="p">,</span> <span class="s1">&#39;Junior&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;SR&#39;</span><span class="p">,</span> <span class="s1">&#39;Senior&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;GR&#39;</span><span class="p">,</span> <span class="s1">&#39;Graduate&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The first element in each tuple is the actual value to be stored. The second
element is the human-readable name for the option.</p>
<p>The choices list can be defined either as part of your model class:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">GENDER_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">GENDER_CHOICES</span><span class="p">)</span>
</pre></div>
</div>
<p>or outside your model class altogether:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">GENDER_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;Female&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">GENDER_CHOICES</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also collect your available choices into named groups that can
be used for organizational purposes in a form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">MEDIA_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;Audio&#39;</span><span class="p">,</span> <span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;vinyl&#39;</span><span class="p">,</span> <span class="s1">&#39;Vinyl&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="s1">&#39;CD&#39;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Video&#39;</span><span class="p">,</span> <span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;vhs&#39;</span><span class="p">,</span> <span class="s1">&#39;VHS Tape&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;dvd&#39;</span><span class="p">,</span> <span class="s1">&#39;DVD&#39;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;unknown&#39;</span><span class="p">,</span> <span class="s1">&#39;Unknown&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The first element in each tuple is the name to apply to the group. The
second element is an iterable of 2-tuples, with each 2-tuple containing
a value and a human-readable name for an option. Grouped options may be
combined with ungrouped options within a single list (such as the
<cite>unknown</cite> option in this example).</p>
<p>Finally, note that choices can be any iterable object – not necessarily a list
or tuple. This lets you construct choices dynamically. But if you find yourself
hacking <code class="docutils literal"><span class="pre">choices</span></code> to be dynamic, you’re probably better off using a
proper database table with a <cite>ForeignKey`</cite>. <code class="docutils literal"><span class="pre">choices</span></code> is
meant for static data that doesn’t change much, if ever.</p>
</div>
<div class="section" id="db-column">
<h3>db_column<a class="headerlink" href="#db-column" title="Permalink to this headline">¶</a></h3>
<p>The name of the database column to use for this field. If this isn’t given,
Django will use the field’s name.</p>
<p>If your database column name is an SQL reserved word, or contains
characters that aren’t allowed in Python variable names – notably, the
hyphen – that’s OK. Django quotes column and table names behind the
scenes.</p>
</div>
<div class="section" id="db-index">
<h3>db_index<a class="headerlink" href="#db-index" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, <code class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">sqlindexes</span></code> will output a
<code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">INDEX</span></code> statement for this field.</p>
</div>
<div class="section" id="db-tablespace">
<h3>db_tablespace<a class="headerlink" href="#db-tablespace" title="Permalink to this headline">¶</a></h3>
<p>The name of the database tablespace to use for this field’s index, if this field
is indexed. The default is the project’s <code class="docutils literal"><span class="pre">DEFAULT_INDEX_TABLESPACE</span></code>
setting, if set, or the <code class="docutils literal"><span class="pre">db_tablespace</span></code> of the model, if any. If
the backend doesn’t support tablespaces, this option is ignored.</p>
</div>
<div class="section" id="default">
<h3>default<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h3>
<p>The default value for the field. This can be a value or a callable object. If
callable it will be called every time a new object is created.</p>
</div>
<div class="section" id="editable">
<h3>editable<a class="headerlink" href="#editable" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">False</span></code>, the field will not be editable in the admin or via forms
automatically generated from the model class. Default is <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<div class="section" id="help-text">
<h3>help_text<a class="headerlink" href="#help-text" title="Permalink to this headline">¶</a></h3>
<p>Extra “help” text to be displayed under the field on the object’s admin form.
It’s useful for documentation even if your object doesn’t have an admin form.</p>
<p>Note that this value is <em>not</em> HTML-escaped when it’s displayed in the admin
interface. This lets you include HTML in <code class="docutils literal"><span class="pre">help_text</span></code> if you so
desire. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;.&quot;</span>
</pre></div>
</div>
<p>Alternatively you can use plain text and
<code class="docutils literal"><span class="pre">django.utils.html.escape()</span></code> to escape any HTML special characters.</p>
</div>
<div class="section" id="primary-key">
<h3>primary_key<a class="headerlink" href="#primary-key" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, this field is the primary key for the model.</p>
<p>If you don’t specify <code class="docutils literal"><span class="pre">primary_key=True</span></code> for any fields in your model, Django
will automatically add an <code class="docutils literal"><span class="pre">AutoField</span></code> to hold the primary key, so you
don’t need to set <code class="docutils literal"><span class="pre">primary_key=True</span></code> on any of your fields unless you want to
override the default primary-key behavior.</p>
<p><code class="docutils literal"><span class="pre">primary_key=True</span></code> implies <code class="docutils literal"><span class="pre">null=False</span></code> and <code class="docutils literal"><span class="pre">unique=True</span></code>.
Only one primary key is allowed on an object.</p>
</div>
<div class="section" id="unique">
<h3>unique<a class="headerlink" href="#unique" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, this field must be unique throughout the table.</p>
<p>This is enforced at the database level and at the level of forms created with
<code class="docutils literal"><span class="pre">ModelForm</span></code> (including forms in the Django admin site). If
you try to save a model with a duplicate value in a <code class="docutils literal"><span class="pre">unique</span></code>
field, an <code class="docutils literal"><span class="pre">IntegrityError</span></code> will be raised by the model’s
<code class="docutils literal"><span class="pre">save</span></code> method.</p>
<p>This option is valid on all field types except <code class="docutils literal"><span class="pre">ManyToManyField</span></code>,
<code class="docutils literal"><span class="pre">FileField</span></code> and <code class="docutils literal"><span class="pre">ImageField</span></code>.</p>
</div>
<div class="section" id="unique-for-date">
<h3>unique_for_date<a class="headerlink" href="#unique-for-date" title="Permalink to this headline">¶</a></h3>
<p>Set this to the name of a <code class="docutils literal"><span class="pre">DateField</span></code> or <code class="docutils literal"><span class="pre">DateTimeField</span></code> to
require that this field be unique for the value of the date field.</p>
<p>For example, if you have a field <code class="docutils literal"><span class="pre">title</span></code> that has
<code class="docutils literal"><span class="pre">unique_for_date=&quot;pub_date&quot;</span></code>, then Django wouldn’t allow the entry of two
records with the same <code class="docutils literal"><span class="pre">title</span></code> and <code class="docutils literal"><span class="pre">pub_date</span></code>.</p>
<p>This is enforced at the level of forms created with <code class="docutils literal"><span class="pre">ModelForm</span></code> (including
forms in the Django admin site) but not at the database level.</p>
</div>
<div class="section" id="unique-for-month">
<h3>unique_for_month<a class="headerlink" href="#unique-for-month" title="Permalink to this headline">¶</a></h3>
<p>Like <code class="docutils literal"><span class="pre">unique_for_date</span></code>, but requires the field to be unique with
respect to the month.</p>
</div>
<div class="section" id="unique-for-year">
<h3>unique_for_year<a class="headerlink" href="#unique-for-year" title="Permalink to this headline">¶</a></h3>
<p>Like <code class="docutils literal"><span class="pre">unique_for_date</span></code> and <code class="docutils literal"><span class="pre">unique_for_month</span></code>.</p>
</div>
<div class="section" id="verbose-name">
<h3>verbose_name<a class="headerlink" href="#verbose-name" title="Permalink to this headline">¶</a></h3>
<p>A human-readable name for the field. If the verbose name isn’t given, Django
will automatically create it using the field’s attribute name, converting
underscores to spaces.</p>
</div>
</div>
<div class="section" id="relationships">
<h2>Relationships<a class="headerlink" href="#relationships" title="Permalink to this headline">¶</a></h2>
<p>Clearly, the power of relational databases lies in relating tables to each
other. Django offers ways to define the three most common types of database
relationships: many-to-one, many-to-many, and one-to-one.</p>
<div class="section" id="foreignkey">
<h3>ForeignKey<a class="headerlink" href="#foreignkey" title="Permalink to this headline">¶</a></h3>
<p>A many-to-one relationship. Requires a positional argument: the class to which
the model is related.</p>
<p>To create a recursive relationship – an object that has a many-to-one
relationship with itself – use <code class="docutils literal"><span class="pre">models.ForeignKey('self')</span></code>.</p>
<p>If you need to create a relationship on a model that has not yet been defined,
you can use the name of the model, rather than the model object itself:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;Manufacturer&#39;</span><span class="p">)</span>
    <span class="c1"># ...</span>

<span class="k">class</span> <span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>Note, however, that this only refers to models in the same <code class="docutils literal"><span class="pre">models.py</span></code> file.</p>
<p>To refer to models defined in another
application, you must instead explicitly specify the application label. For
example, if the <code class="docutils literal"><span class="pre">Manufacturer</span></code> model above is defined in another application
called <code class="docutils literal"><span class="pre">production</span></code>, you’d need to use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;production.Manufacturer&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Behind the scenes, Django appends <code class="docutils literal"><span class="pre">&quot;_id&quot;</span></code> to the field name to create its
database column name. In the above example, the database table for the <code class="docutils literal"><span class="pre">Car</span></code>
model will have a <code class="docutils literal"><span class="pre">manufacturer_id</span></code> column. (You can change this explicitly by
specifying <code class="docutils literal"><span class="pre">db_column</span></code>) However, your code should never have to
deal with the database column name, unless you write custom SQL. You’ll always
deal with the field names of your model object.</p>
<p><code class="docutils literal"><span class="pre">ForeignKey</span></code> accepts an extra set of arguments – all optional – that
define the details of how the relation works.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">limit_choices_to</span></code></dt>
<dd><p class="first">A dictionary of lookup arguments and values
that limit the available admin choices for this object. Use this with
functions from the Python <code class="docutils literal"><span class="pre">datetime</span></code> module to limit choices of objects by
date. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">limit_choices_to</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pub_date__lte&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">}</span>
</pre></div>
</div>
<p>only allows the choice of related objects with a <code class="docutils literal"><span class="pre">pub_date</span></code> before the
current date/time to be chosen.</p>
<p class="last"><code class="docutils literal"><span class="pre">limit_choices_to</span></code> has no effect on the inline FormSets that are created
to display related objects in the admin.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">related_name</span></code></dt>
<dd>The name to use for the relation from the related object back to this one.</dd>
<dt><code class="docutils literal"><span class="pre">to_field</span></code></dt>
<dd>The field on the related object that the relation is to. By default, Django
uses the primary key of the related object.</dd>
</dl>
</div>
<div class="section" id="manytomanyfield">
<h3>ManyToManyField<a class="headerlink" href="#manytomanyfield" title="Permalink to this headline">¶</a></h3>
<p>A many-to-many relationship. Requires a positional argument: the class to which
the model is related. This works exactly the same as it does for
<code class="docutils literal"><span class="pre">ForeignKey</span></code>, including all the options regarding recursive relationships
and lazy relationships.</p>
<p>Behind the scenes, Django creates an intermediary join table to represent the
many-to-many relationship. By default, this table name is generated using the
names of the two tables being joined. Since some databases don’t support table
names above a certain length, these table names will be automatically
truncated to 64 characters and a uniqueness hash will be used. This means you
might see table names like <code class="docutils literal"><span class="pre">author_books_9cdf4</span></code>; this is perfectly normal.
You can manually provide the name of the join table using the
<code class="docutils literal"><span class="pre">db_table</span></code> option.</p>
<p><code class="docutils literal"><span class="pre">ManyToManyField</span></code> accepts an extra set of arguments – all optional –
that control how the relationship functions.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">related_name</span></code></dt>
<dd>Same as <code class="docutils literal"><span class="pre">related_name</span></code> in <code class="docutils literal"><span class="pre">ForeignKey</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">limit_choices_to</span></code></dt>
<dd><p class="first">Same as <code class="docutils literal"><span class="pre">limit_choices_to</span></code> in <code class="docutils literal"><span class="pre">ForeignKey</span></code>.</p>
<p class="last"><code class="docutils literal"><span class="pre">limit_choices_to</span></code> has no effect when used on a <code class="docutils literal"><span class="pre">ManyToManyField</span></code> with a
custom intermediate table specified using the
<code class="docutils literal"><span class="pre">through</span></code> paramter.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">symmetrical</span></code></dt>
<dd><p class="first">Only used in the definition of ManyToManyFields on self. Consider the
following model:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">friends</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;self&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When Django processes this model, it identifies that it has a
<code class="docutils literal"><span class="pre">ManyToManyField</span></code> on itself, and as a result, it doesn’t add a
<code class="docutils literal"><span class="pre">person_set</span></code> attribute to the <code class="docutils literal"><span class="pre">Person</span></code> class. Instead, the
<code class="docutils literal"><span class="pre">ManyToManyField</span></code> is assumed to be symmetrical – that is, if I am
your friend, then you are my friend.</p>
<p class="last">If you do not want symmetry in many-to-many relationships with <code class="docutils literal"><span class="pre">self</span></code>, set
<code class="docutils literal"><span class="pre">symmetrical</span></code> to <code class="docutils literal"><span class="pre">False</span></code>. This will force Django to
add the descriptor for the reverse relationship, allowing
<code class="docutils literal"><span class="pre">ManyToManyField</span></code> relationships to be non-symmetrical.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">through</span></code></dt>
<dd><p class="first">Django will automatically generate a table to manage many-to-many
relationships. However, if you want to manually specify the intermediary
table, you can use the <code class="docutils literal"><span class="pre">through</span></code> option to specify
the Django model that represents the intermediate table that you want to
use.</p>
<p class="last">The most common use for this option is when you want to associate
extra data with a many-to-many relationship.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">db_table</span></code></dt>
<dd>The name of the table to create for storing the many-to-many data. If this
is not provided, Django will assume a default name based upon the names of
the two tables being joined.</dd>
</dl>
</div>
<div class="section" id="onetoonefield">
<h3>OneToOneField<a class="headerlink" href="#onetoonefield" title="Permalink to this headline">¶</a></h3>
<p>A one-to-one relationship. Conceptually, this is similar to a
<code class="docutils literal"><span class="pre">ForeignKey</span></code> with <code class="docutils literal"><span class="pre">unique=True</span></code>, but the
“reverse” side of the relation will directly return a single object.</p>
<p>This is most useful as the primary key of a model which “extends”
another model in some way; multi-table-inheritance is
implemented by adding an implicit one-to-one relation from the child
model to the parent model, for example.</p>
<p>One positional argument is required: the class to which the model will be
related. This works exactly the same as it does for <code class="docutils literal"><span class="pre">ForeignKey</span></code>,
including all the options regarding recursive relationships and lazy
relationships.</p>
<p>Additionally, <code class="docutils literal"><span class="pre">OneToOneField</span></code> accepts all of the extra arguments
accepted by <code class="docutils literal"><span class="pre">ForeignKey</span></code>, plus one extra argument:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">parent_link</span></code></dt>
<dd>When <code class="docutils literal"><span class="pre">True</span></code> and used in a model which inherits from another
(concrete) model, indicates that this field should be used as the
link back to the parent class, rather than the extra
<code class="docutils literal"><span class="pre">OneToOneField</span></code> which would normally be implicitly created by
subclassing.</dd>
</dl>
</div>
</div>
<div class="section" id="model-metadata-options">
<h2>Model Metadata Options<a class="headerlink" href="#model-metadata-options" title="Permalink to this headline">¶</a></h2>
<p>Model-specific metadata lives in a <code class="docutils literal"><span class="pre">class</span> <span class="pre">Meta</span></code> defined in the body of your
model class:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># model metadata options go here</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Model metadata is “anything that’s not a field,” such as ordering options and so forth.</p>
<p>The sections that follow present a list of all possible <code class="docutils literal"><span class="pre">Meta</span></code> options.
No options are required. Adding <code class="docutils literal"><span class="pre">class</span> <span class="pre">Meta</span></code> to a model is completely optional.</p>
<div class="section" id="abstract">
<h3>abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code>, this model will be an abstract base class. See the Django
documentation for more on abstract base classes.</p>
</div>
<div class="section" id="db-table">
<h3>db_table<a class="headerlink" href="#db-table" title="Permalink to this headline">¶</a></h3>
<p>The name of the database table to use for the model:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;music_album&#39;</span>
</pre></div>
</div>
<div class="section" id="table-names">
<h4>Table names<a class="headerlink" href="#table-names" title="Permalink to this headline">¶</a></h4>
<p>To save you time, Django automatically derives the name of the database table
from the name of your model class and the app that contains it. A model’s
database table name is constructed by joining the model’s “app label” – the
name you used in <code class="docutils literal"><span class="pre">manage.py</span> <span class="pre">startapp</span></code> – to the model’s class name, with an
underscore between them.</p>
<p>For example, if you have an app <code class="docutils literal"><span class="pre">bookstore</span></code> (as created by
<code class="docutils literal"><span class="pre">manage.py</span> <span class="pre">startapp</span> <span class="pre">bookstore</span></code>), a model defined as <code class="docutils literal"><span class="pre">class</span> <span class="pre">Book</span></code> will have
a database table named <code class="docutils literal"><span class="pre">bookstore_book</span></code>.</p>
<p>To override the database table name, use the <code class="docutils literal"><span class="pre">db_table</span></code> parameter in
<code class="docutils literal"><span class="pre">class</span> <span class="pre">Meta</span></code>.</p>
<p>If your database table name is an SQL reserved word, or contains characters that
aren’t allowed in Python variable names – notably, the hyphen – that’s OK.
Django quotes column and table names behind the scenes.</p>
</div>
</div>
<div class="section" id="id1">
<h3>db_tablespace<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The name of the database tablespace to use for the model. If the backend doesn’t
support tablespaces, this option is ignored.</p>
</div>
<div class="section" id="get-latest-by">
<h3>get_latest_by<a class="headerlink" href="#get-latest-by" title="Permalink to this headline">¶</a></h3>
<p>The name of a <code class="docutils literal"><span class="pre">DateField</span></code> or <code class="docutils literal"><span class="pre">DateTimeField</span></code> in the model. This
specifies the default field to use in your model <code class="docutils literal"><span class="pre">Manager</span></code>’s
<code class="docutils literal"><span class="pre">latest</span></code> method.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">get_latest_by</span> <span class="o">=</span> <span class="s2">&quot;order_date&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="managed">
<h3>managed<a class="headerlink" href="#managed" title="Permalink to this headline">¶</a></h3>
<p>Defaults to <code class="docutils literal"><span class="pre">True</span></code>, meaning Django will create the appropriate database
tables in <code class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">syncdb</span></code> and remove them as part of a <code class="docutils literal"><span class="pre">reset</span></code>
management command. That is, Django <em>manages</em> the database tables’ lifecycles.</p>
<p>If <code class="docutils literal"><span class="pre">False</span></code>, no database table creation or deletion operations will be
performed for this model. This is useful if the model represents an existing
table or a database view that has been created by some other means. This is
the <em>only</em> difference when <code class="docutils literal"><span class="pre">managed</span></code> is <code class="docutils literal"><span class="pre">False</span></code>. All other aspects of
model handling are exactly the same as normal. This includes</p>
<ol class="arabic">
<li><p class="first">Adding an automatic primary key field to the model if you don’t declare
it. To avoid confusion for later code readers, it’s recommended to
specify all the columns from the database table you are modeling when
using unmanaged models.</p>
</li>
<li><p class="first">If a model with <code class="docutils literal"><span class="pre">managed=False</span></code> contains a
<code class="docutils literal"><span class="pre">ManyToManyField</span></code> that points to another
unmanaged model, then the intermediary table for the many-to-many join
will also not be created. However, the intermediary table between one
managed and one unmanaged model <em>will</em> be created.</p>
<p>If you need to change this default behavior, create the intermediary
table as an explicit model (with <code class="docutils literal"><span class="pre">managed</span></code> set as needed) and use the
<code class="docutils literal"><span class="pre">through</span></code> attribute to make the relation use your
custom model.</p>
</li>
</ol>
<p>For tests involving models with <code class="docutils literal"><span class="pre">managed=False</span></code>, it’s up to you to ensure
the correct tables are created as part of the test setup.</p>
<p>If you’re interested in changing the Python-level behavior of a model class,
you <em>could</em> use <code class="docutils literal"><span class="pre">managed=False</span></code> and create a copy of an existing model.
However, there’s a better approach for that situation: proxy-models.</p>
</div>
<div class="section" id="ordering">
<h3>ordering<a class="headerlink" href="#ordering" title="Permalink to this headline">¶</a></h3>
<p>The default ordering for the object, for use when obtaining lists of objects:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-order_date&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This is a tuple or list of strings. Each string is a field name with an optional
“-” prefix, which indicates descending order. Fields without a leading “-” will
be ordered ascending. Use the string “?” to order randomly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Regardless of how many fields are in <code class="docutils literal"><span class="pre">ordering</span></code>, the admin
site uses only the first field.</p>
</div>
<p>For example, to order by a <code class="docutils literal"><span class="pre">pub_date</span></code> field ascending, use this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pub_date&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To order by <code class="docutils literal"><span class="pre">pub_date</span></code> descending, use this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-pub_date&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To order by <code class="docutils literal"><span class="pre">pub_date</span></code> descending, then by <code class="docutils literal"><span class="pre">author</span></code> ascending, use this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-pub_date&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="proxy">
<h3>proxy<a class="headerlink" href="#proxy" title="Permalink to this headline">¶</a></h3>
<p>If set to <code class="docutils literal"><span class="pre">True</span></code>, a model which subclasses another model will be treated as
a proxy model. For more on proxy models, see the Django documentation.</p>
</div>
<div class="section" id="unique-together">
<h3>unique_together<a class="headerlink" href="#unique-together" title="Permalink to this headline">¶</a></h3>
<p>Sets of field names that, taken together, must be unique:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;driver&quot;</span><span class="p">,</span> <span class="s2">&quot;restaurant&quot;</span><span class="p">),)</span>
</pre></div>
</div>
<p>This is a list of lists of fields that must be unique when considered together.
It’s used by <code class="docutils literal"><span class="pre">ModelForm</span></code> forms (including forms in the Django admin site) and
is enforced at the database level (i.e., the appropriate <code class="docutils literal"><span class="pre">UNIQUE</span></code> statements
are included in the <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement).</p>
<p>For convenience, unique_together can be a single sequence when dealing with a single
set of fields:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;driver&quot;</span><span class="p">,</span> <span class="s2">&quot;restaurant&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>verbose_name<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>A human-readable name for the object, singular:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;pizza&quot;</span>
</pre></div>
</div>
<p>If this isn’t given, Django will use a munged version of the class name:
<code class="docutils literal"><span class="pre">CamelCase</span></code> becomes <code class="docutils literal"><span class="pre">camel</span> <span class="pre">case</span></code>.</p>
</div>
<div class="section" id="verbose-name-plural">
<h3>verbose_name_plural<a class="headerlink" href="#verbose-name-plural" title="Permalink to this headline">¶</a></h3>
<p>The plural name for the object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;stories&quot;</span>
</pre></div>
</div>
<p>If this isn’t given, Django will use <code class="docutils literal"><span class="pre">verbose_name</span></code> + <code class="docutils literal"><span class="pre">&quot;s&quot;</span></code>.</p>
</div>
</div>
</div>
</div>

          </div>
        </div>
      </div>
      <div id="ft">
        
<div class="nav">
    
        <a href='chapter20.html'>&laquo; previous</a> &loz;
    
    <a href="index.html">table of contents</a>
    
        &loz; <a href='appendixB.html'>next &raquo;</a>
    
</div>

        Copyright Adrian Holovaty, Jacob Kaplan-Moss, et al.<br>This
        work is licensed under the <a href="license.html">GNU Free Document
        License</a>.
      </div>
    </div>
  
  </body>
</html>